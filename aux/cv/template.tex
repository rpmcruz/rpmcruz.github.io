\documentclass[10pt]{article}

\usepackage[a4paper, margin=2cm]{geometry}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[scaled=0.85]{beramono}  % bold tt
\renewcommand{\familydefault}{\ttdefault}
\setlength{\parindent}{0cm}

\usepackage[english]{babel}
\usepackage{graphicx}
\usepackage[hidelinks]{hyperref}
\usepackage{xcolor}
\definecolor{dark-blue}{rgb}{0.15,0.15,0.4}
\hypersetup{colorlinks, linkcolor={dark-blue}, citecolor={dark-blue}, urlcolor={dark-blue}}

\usepackage{lastpage}
\usepackage{fancyhdr}
\pagestyle{fancy}
\renewcommand{\headrulewidth}{0pt}
\cfoot{Page \thepage\ of \pageref{LastPage}}

\usepackage{tikz}
\usetikzlibrary{tikzmark, calc}

\newcommand{\caixa}[1]{\bigskip\tikzmark{{'{#'}}1}%
\raisebox{-0.8mm}{\begin{tikzpicture}
\draw[thick] (0,0) rectangle (0.35,0.35);
\draw[thick] (0.1,0.175) -- (0.25,0.175);
\end{tikzpicture}}}


\begin{document}

% photo and personal information
\begin{minipage}{0.12\linewidth}
\includegraphics[width=\linewidth]{imgs/photo}
\end{minipage}
\begin{minipage}{0.88\linewidth}
\textbf{{'{'}}\large {{ personal['name'] }}{{'}'}}\\
\raisebox{-0.25\height}{\includegraphics[width=1em]{imgs/email}} \href{mailto:{{ personal.email }}{{'}'}}{{'{'}}{{ personal.email }}{{'}'}}\\
\raisebox{-0.25\height}{\includegraphics[width=1em]{imgs/www}} \href{{'{'}}{{ personal.webpage }}{{'}'}}{{'{'}}{{ personal.webpage }}{{'}'}}\\
{{ personal.phone }} $\bullet$ Valongo, Portugal
\end{minipage}

\bigskip
\textcolor{black!80}{\colorbox{black!10}{\begin{minipage}{\linewidth}
{{ introduction }}
\end{minipage}}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\filbreak
\caixa{education} Education

\bigskip
\begin{tabular}{p{1mm}lp{46em}}
{% for item in education %}
& \tikzmark{e{{ loop.index }}}\textbf{ {{ item.date }} } & {{ item.title }} {{ item.observation }} \\
& & \textcolor{black!60}{ {{ item.university }} } \\
{% endfor %}
\end{tabular}

\begin{tikzpicture}[remember picture, overlay]
{% for item in education %}
\draw[dashed] let \p1=(pic cs:e{{ loop.index }}) in ({2mm,\y1+1mm}) -- ++ (4mm,0);
{% endfor %}
\draw[dashed] let \p1=(pic cs:education), \p2=(pic cs:e{{ education|length }}) in ({2mm,\y1-1mm}) -- ({2mm,\y2+1mm});
\end{tikzpicture}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\filbreak
\caixa{career} Career

\bigskip
\begin{tabular}{p{1mm}lp{46em}}
{% for item in career %}
& \tikzmark{c{{ loop.index }}}\textbf{ {{ item.date }} } & {{ item.title }} \\
& & \textcolor{black!60}{ {{ item.where }} } \\
{% endfor %}
\end{tabular}

\begin{tikzpicture}[remember picture, overlay]
{% for item in career %}
\draw[dashed] let \p1=(pic cs:c{{ loop.index }}) in ({2mm,\y1+1mm}) -- ++ (4mm,0);
{% endfor %}
\draw[dashed] let \p1=(pic cs:career), \p2=(pic cs:c{{ career|length }}) in ({2mm,\y1-1mm}) -- ({2mm,\y2+1mm});
\end{tikzpicture}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\filbreak
\caixa{others} Other related work

\bigskip
\begin{tabular}{p{1mm}lp{46em}}
{% for item in misc %}
& \tikzmark{o{{ loop.index }}}\textbf{ {{ item.date }} } & {{ item.title }} \\
& & \textcolor{black!60}{ {{ item.description }} } \\
{% endfor %}
\end{tabular}

\begin{tikzpicture}[remember picture, overlay]
{% for item in misc %}
\draw[dashed] let \p1=(pic cs:o{{ loop.index }}) in ({2mm,\y1+1mm}) -- ++ (4mm,0);
{% endfor %}
\draw[dashed] let \p1=(pic cs:others), \p2=(pic cs:o{{ misc|length }}) in ({2mm,\y1-1mm}) -- ({2mm,\y2+1mm});
\end{tikzpicture}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\filbreak
\caixa{awards} Awards

\bigskip
\begin{tabular}{p{1mm}lp{46em}}
{% for item in awards %}
& \tikzmark{a{{ loop.index }}}\textbf{ {{ item.date }} } & {{ item.title }} \\
& & \textcolor{black!60}{ {{ item.where }} } \\
{% endfor %}
\end{tabular}

\begin{tikzpicture}[remember picture, overlay]
{% for item in awards %}
\draw[dashed] let \p1=(pic cs:a{{ loop.index }}) in ({2mm,\y1+1mm}) -- ++ (4mm,0);
{% endfor %}
\draw[dashed] let \p1=(pic cs:awards), \p2=(pic cs:a{{ awards|length }}) in ({2mm,\y1-1mm}) -- ({2mm,\y2+1mm});
\end{tikzpicture}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\filbreak
\caixa{publications} Publications

\bigskip
\begin{tabular}{p{1mm}lp{46em}}
{% for item in publications %}
& \tikzmark{p{{ loop.index }}}\textbf{ {{ item.date }} } & {{ item.title }} \\
& & \textcolor{black!60}{ {{ item.authors }} } \\
& & \textcolor{black!60}{ {{ item.publisher|replace('&', '\\&') }} } \\
{% endfor %}
\end{tabular}

\begin{tikzpicture}[remember picture, overlay]
{% for item in publications %}
\draw[dashed] let \p1=(pic cs:p{{ loop.index }}) in ({2mm,\y1+1mm}) -- ++ (4mm,0);
{% endfor %}
\draw[dashed] let \p1=(pic cs:publications), \p2=(pic cs:p{{ publications|length }}) in ({2mm,\y1-1mm}) -- ({2mm,\y2+1mm});
\end{tikzpicture}

\bigskip
\textcolor{black!80}{\colorbox{black!10}{\begin{minipage}{\linewidth}
Recommendation contacts will be provided upon request.\\
Consult my github for more projects: \url{https://github.com/rpmcruz}.
\end{minipage}}}


\end{document}

